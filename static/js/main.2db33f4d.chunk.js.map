{"version":3,"sources":["actions/index.js","actionTypes/index.js","components/MovieCard.js","components/MovieList.js","components/SearchComponent.js","components/NavBar.js","App.js","reducers/initialState.js","reducers/index.js","store/index.js","index.js"],"names":["searchMovies","payload","type","advancePage","MovieCard","props","className","onError","e","console","log","target","src","loading","width","posterImageName","alt","name","connect","state","dispatch","setMovieList","data","searchResults","movieList","page","bottomBoundaryRef","useRef","useState","reachedBottom","setReachedBottom","useEffect","getData","scrollObserver","useCallback","node","IntersectionObserver","entries","forEach","en","intersectionRatio","observe","current","a","fetch","response","json","renderMovieList","map","el","i","key","length","id","style","border","ref","showSearchBar","setshowSearchBar","setSearchQuery","onClick","placeholder","onKeyUp","query","value","searchQuery","showSearchBtn","setShowSearchBtn","App","initialState","category","reducer","action","preState","JSON","parse","stringify","newMoviewList","content","replaceAll","searchRegEx","RegExp","filter","test","store","createStore","applyMiddleware","logger","ReactDOM","render","document","getElementById"],"mappings":"4SAIaA,EAAe,SAAAC,GAAO,MAAK,CAACC,KCFZ,gBDEiCD,YAEjDE,EAAc,SAAAF,GAAO,MAAK,CAACC,KCFZ,eDEgCD,YEM7CG,EATG,SAACC,GACf,OAAO,yBAAKC,UAAU,IAClB,yBAAKC,QAAS,SAACC,GACXC,QAAQC,IAAI,mBAAmBF,EAAEG,OAAOC,KACxCJ,EAAEG,OAAOC,IAAM,6CAA8CC,QAAQ,OAAOC,MAAM,MAAMF,IAAG,iCAA4BP,EAAMU,iBAAmBC,IAAI,UACxJ,uBAAGV,UAAU,cAAcD,EAAMY,QCmE1BC,eATS,SAAAC,GAAK,MAAK,CAChCA,YAGyB,SAAAC,GAAQ,MAAK,CACtCC,aAAc,SAAAC,GAAI,OAAIF,EHrEgB,CAAClB,KCFX,iBDEiCD,QGqEjBqB,KAC5CnB,YAAa,SAAAmB,GAAI,OAAIF,EAASjB,EAAYmB,QAG7BJ,EAtEG,SAAAb,GAAU,IAAD,EACkBA,EAAMc,MAA9BI,GADM,EACjBC,UADiB,EACND,eAAeE,EADT,EACSA,KAC9BC,EAAoBC,iBAAO,MAFN,EAGiBC,oBAAS,GAH1B,mBAGlBC,EAHkB,KAGHC,EAHG,KAKzBC,qBAAU,WACRtB,QAAQC,IAAI,cAAee,GACnB,GAARA,GAAaO,MACZ,CAACP,IAEJ,IAAMQ,EAAiBC,uBAAY,SAAAC,GACjC,IAAIC,sBAAqB,SAAAC,GACvB5B,QAAQC,IAAI,8BAA+B2B,GAC3CA,EAAQC,SAAQ,SAAAC,GACVA,EAAGC,kBAAoB,IACzB/B,QAAQC,IAAI,sBAAuBL,EAAMc,MAAMM,MAC/CpB,EAAMF,eAEoB,GAAxBoC,EAAGC,mBAA0BX,GAC/BC,GAAiB,SAGpBW,QAAQN,KACV,CAAChC,IAEJ4B,qBAAU,WACJL,EAAkBgB,SACpBT,EAAeP,EAAkBgB,WAElC,CAACT,EAAgBP,IAIpB,IAAMM,EAAO,uCAAG,8BAAAW,EAAA,+EAGWC,MAAM,+CAAD,OAAgDnB,EAAhD,UAHhB,cAGNoB,EAHM,gBAIOA,EAASC,OAJhB,OAINxB,EAJM,OAKZjB,EAAMgB,aAAaC,GALP,kDAOZb,QAAQC,IAAR,MACAoB,GAAiB,GARL,0DAAH,qDAYPiB,EAAkBxB,EAExB,OAAO,6BAEL,yBAAKjB,UAAU,kBAAkBM,IAAI,uCAErC,yBAAKN,UAAU,0BACZyC,EAAgBC,KAAI,SAACC,EAAIC,GAAL,OAAW,kBAAC,EAAD,CAAWC,IAAKD,EAAGjC,KAAMgC,EAAGhC,KAAMF,gBAAiBkC,EAAG,sBAEvFpB,GAAiB,yBAAKvB,UAAW,qDACP,GAAxBiB,EAAc6B,OAAc,mBAAqB,sBAEpD,yBAAKC,GAAG,uBAAuBC,MAAO,CAAEC,OAAQ,mBAAqBC,IAAK9B,QCjC/DR,cAAQ,MAJI,SAAAE,GAAQ,MAAK,CACpCpB,aAAc,SAAAsB,GAAI,OAAIF,EAASpB,EAAasB,QAGjCJ,EAzBS,SAAAb,GAAU,IAAD,EACauB,oBAAS,GADtB,mBACtB6B,EADsB,KACPC,EADO,OAES9B,mBAAS,IAFlB,mBAET+B,GAFS,WAU7B,OAAO,yBAAKrD,UAAS,yBAAqBmD,EAAoB,aAAJ,EAArC,YACPA,EACA,yBAAKnD,UAAU,iCAAiCM,IAAI,mCAAmCgD,QAAS,kBAAMF,GAAkBD,MADxG,yBAAKnD,UAAU,iCAAiCM,IAAI,oCAAoCgD,QAAS,kBAAMF,GAAkBD,MAE1IA,GACG,2BAAOnD,UAAU,yEACbuD,YAAY,gBACZC,QAAS,SAAAtD,GAAC,OAZHuD,EAY0BvD,EAAEG,OAAOqD,MAX1DvD,QAAQC,IAAI,YAAaqD,GACzB1D,EAAML,aAAa,CAAEiE,YAAaF,SAClCJ,EAAeI,GAHQ,IAAAA,SC2BhB7C,cAAQ,MAJI,SAAAE,GAAQ,MAAK,CACpCpB,aAAc,SAAAsB,GAAI,OAAIF,EAASpB,EAAasB,QAGjCJ,EA9BA,SAAAb,GAAU,IAAD,EACsBuB,oBAAS,GAD/B,mBACbsC,EADa,KACEC,EADF,OAEkBvC,mBAAS,IAF3B,6BAUpB,OAAO,6BACH,yBAAKtB,UAAU,gBACX,yBAAKA,UAAU,kBAAkBM,IAAI,uCACrC,yBAAKN,UAAU,yBACX,yBAAKA,UAAU,4BAA4BM,IAAI,kCAAkCgD,QAAS,kBAAMO,GAAkBD,OAEtH,yBAAK5D,UAAU,6BACX,wBAAIA,UAAU,cAAd,oBAEJ,yBAAKA,UAAU,0BACX,kBAAC,EAAD,YCVD8D,MAVf,WAEE,OACE,yBAAK9D,UAAU,YACb,kBAAC,EAAD,MACA,kBAAC,EAAD,Q,qBCVO+D,EAAe,CACxB7C,UAAW,GACXC,KAAM,EACN6C,SAAU,kBACV/C,cAAe,IC8BJgD,EA/BC,WAAmC,IAAlCpD,EAAiC,uDAAzBkD,EAAcG,EAAW,uCACxCC,EAAWC,KAAKC,MAAMD,KAAKE,UAAUzD,IAE3C,OAAQqD,EAAOtE,MACX,IPPsB,iBOQlB,IAAM2E,EAAa,sBAAOJ,EAASjD,WAAhB,YAA8BgD,EAAOvE,QAAQwB,KAAK,iBAAiBqD,UAGtF,OAFAL,EAASjD,UAAT,YAAyBqD,GACzBJ,EAASlD,cAAT,YAA6BsD,GACtB,2BACA1D,GAAUsD,GAIrB,IPdqB,gBOcA,IACXR,EAAgBO,EAAOvE,QAAvBgE,YAEN,GAA0B,IAD1BA,EAAcA,EAAYc,WAAW,KAAM,KAC3B3B,OAAa,OAAO,2BAAKjC,GAAZ,IAAmBI,cAAc,YAAKJ,EAAMK,aAEzE,IAAMwD,EAAc,IAAIC,OAAOhB,EAAa,MACtC1C,EAAgBJ,EAAMK,UAAU0D,QAAO,SAAAjC,GAAE,OAAI+B,EAAYG,KAAKlC,EAAGhC,SACvE,OAAO,2BAAKE,GAAZ,IAAmBI,kBAGvB,IPtBoB,eOwBhB,QADEkD,EAAShD,KACJ,2BAAIN,GAAUsD,GAEzB,QAAS,OAAO,eAAKtD,K,iBCtBdiE,EAJDC,YAAYd,EACtBe,YAAgBC,MCIpBC,IAASC,OACP,kBAAC,IAAD,CAAUL,MAAOA,GACf,kBAAC,EAAD,OAEFM,SAASC,eAAe,W","file":"static/js/main.2db33f4d.chunk.js","sourcesContent":["import { ADVANCE_PAGE, SEARCH_MOVIES, SET_MOVIE_LIST } from \"../actionTypes\";\n\nexport const setMovieList = payload => ({type: SET_MOVIE_LIST, payload});\n\nexport const searchMovies = payload => ({type: SEARCH_MOVIES, payload});\n\nexport const advancePage = payload => ({type: ADVANCE_PAGE, payload});","export const SET_MOVIE_LIST = 'SET_MOVIE_LIST';\n\nexport const SEARCH_MOVIES = 'SEARCH_MOVIES';\n\nexport const ADVANCE_PAGE = 'ADVANCE_PAGE';","import React from 'react';\n// import '../styles/MovieCard.css';\n\nconst MovieCard = (props) => {\n    return <div className=''>\n        <img onError={(e) => {\n            console.log('Image not found ',e.target.src)\n            e.target.src = '/Diagnal/assets/images/posterNotFound.jpg'}} loading=\"lazy\" width=\"200\" src={`/Diagnal/assets/images/${props.posterImageName}`} alt='movie'/>\n        <p className=\"text-white\">{props.name}</p>\n    </div>\n}\n\nexport default MovieCard;","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { setMovieList, advancePage } from '../actions';\nimport MovieCard from './MovieCard';\n\nconst MovieList = props => {\n  const { movieList, searchResults, page } = props.state;\n  let bottomBoundaryRef = useRef(null);\n  const [reachedBottom, setReachedBottom] = useState(false);\n\n  useEffect(() => {\n    console.log('Fetch Page ', page)\n    page != 0 && getData()\n  }, [page])\n\n  const scrollObserver = useCallback(node => {\n    new IntersectionObserver(entries => {\n      console.log(\"IntersectionObserver entry \", entries)\n      entries.forEach(en => {\n        if (en.intersectionRatio > 0) {\n          console.log('Page bottom reached', props.state.page)\n          props.advancePage();\n        }\n        if (en.intersectionRatio == 0 && reachedBottom) {\n          setReachedBottom(false)\n        }\n      });\n    }).observe(node);\n  }, [advancePage])\n\n  useEffect(() => {\n    if (bottomBoundaryRef.current) {\n      scrollObserver(bottomBoundaryRef.current);\n    }\n  }, [scrollObserver, bottomBoundaryRef]);\n\n\n\n  const getData = async () => {\n    debugger\n    try {\n      const response = await fetch(`/Diagnal/assets/json/CONTENTLISTINGPAGE-PAGE${page}.json`);\n      const data = await response.json();\n      props.setMovieList(data);\n    } catch (err) {\n      console.log(err);\n      setReachedBottom(true)\n    }\n  }\n\n  const renderMovieList = searchResults;\n\n  return <div>\n\n    <img className=\"w-full h-35/100\" src=\"/Diagnal/assets/images/nav_bar.png\" />\n\n    <div className='grid gap-4 grid-cols-3'>\n      {renderMovieList.map((el, i) => <MovieCard key={i} name={el.name} posterImageName={el['poster-image']} />)}\n    </div>\n    {reachedBottom && <div className={\"w-full text-center text-yellow-300 animate-bounce\"}>\n      {searchResults.length == 0 ? 'No Results found' : 'Reached the bottom'}\n    </div>}\n    <div id='page-bottom-boundary' style={{ border: '1px solid black' }} ref={bottomBoundaryRef}></div>\n  </div>;\n}\n\nconst mapStateToProps = state => ({\n  state\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setMovieList: data => dispatch(setMovieList(data)),\n  advancePage: data => dispatch(advancePage(data))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MovieList);","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { searchMovies } from '../actions';\n\nconst SearchComponent = props => {\n    const [showSearchBar, setshowSearchBar] = useState(false);\n    const [searchQuery, setSearchQuery] = useState('');\n\n    const searchMoviesByText = query => {\n        console.log('Query is ', query);\n        props.searchMovies({ searchQuery: query });\n        setSearchQuery(query);\n    }\n\n    return <div className={`grid grid-cols-${!showSearchBar ? 1 : '6 bg-black'} gap-4 `}>\n                {!showSearchBar ? <img className=\"col-span-1 h-5/100 w-5/100 p-1\" src='/Diagnal/assets/images/search.png' onClick={() => setshowSearchBar(!showSearchBar)} />\n                : <img className=\"col-span-1 h-5/100 w-5/100 p-1\" src='/Diagnal/assets/images/close.png' onClick={() => setshowSearchBar(!showSearchBar)} />}\n                {showSearchBar &&\n                    <input className=\"col-span-5 bg-transparent focus:outline-none border-b-2 text-white p-1\"\n                        placeholder='Search Movies'\n                        onKeyUp={e => searchMoviesByText(e.target.value)}\n                    />}\n            </div>\n}\n\nconst mapDispatchToProps = dispatch => ({\n    searchMovies: data => dispatch(searchMovies(data))\n})\n\nexport default connect(null, mapDispatchToProps)(SearchComponent);","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { searchMovies } from '../actions';\nimport SearchComponent from './SearchComponent';\n\nconst NavBar = props => {\n    const [showSearchBtn, setShowSearchBtn] = useState(false);\n    const [searchQuery, setSearchQuery] = useState('');\n\n    const searchMoviesByText = query => {\n        console.log('Query is ', query);\n        props.searchMovies({ searchQuery: query });\n        setSearchQuery(query);\n    }\n//  grid grid-cols-3 gap-0\n    return <div>\n        <div className=\"fixed w-full\">\n            <img className=\"w-full h-40/100\" src=\"/Diagnal/assets/images/nav_bar.png\"/>\n            <div className=\"absolute left-0 top-0\">\n                <img className=\"h-5/100 w-5/100 pl-4 pt-2\" src='/Diagnal/assets/images/Back.png' onClick={() => setShowSearchBtn(!showSearchBtn)} />\n            </div>\n            <div className=\"absolute inset-top-center\">\n                <h3 className=\"text-white\">Romantic Comedy</h3>\n            </div>\n            <div className=\"absolute right-0 top-0\">\n                <SearchComponent />\n            </div>\n        </div>\n    </div>\n}\n\nconst mapDispatchToProps = dispatch => ({\n    searchMovies: data => dispatch(searchMovies(data))\n})\n\nexport default connect(null, mapDispatchToProps)(NavBar);","import React from 'react';\nimport './App.css';\nimport MovieList from './components/MovieList';\nimport NavBar from './components/NavBar';\n\nfunction App() {\n \n  return (\n    <div className=\"bg-black\">\n      <NavBar />\n      <MovieList />\n    </div>\n  );\n}\n\nexport default App;\n","export const initialState = {\n    movieList: [],\n    page: 0,\n    category: \"Romantic Comedy\",\n    searchResults: []\n}","import { ADVANCE_PAGE, SEARCH_MOVIES, SET_MOVIE_LIST } from \"../actionTypes\";\nimport { initialState } from \"./initialState\";\n\nconst reducer = (state = initialState, action) => {\n    const preState = JSON.parse(JSON.stringify(state));\n\n    switch (action.type) {\n        case SET_MOVIE_LIST: {\n            const newMoviewList = [...preState.movieList, ...action.payload.page[\"content-items\"].content];\n            preState.movieList = [...newMoviewList]\n            preState.searchResults = [...newMoviewList]\n            return {\n                ...state, ...preState\n            };\n        };\n\n        case SEARCH_MOVIES: {\n            let { searchQuery } = action.payload;\n            searchQuery = searchQuery.replaceAll('\\\\', '');\n            if (searchQuery.length == 0) return { ...state, searchResults: [...state.movieList] };\n\n            const searchRegEx = new RegExp(searchQuery, 'ig')\n            const searchResults = state.movieList.filter(el => searchRegEx.test(el.name));\n            return { ...state, searchResults }\n        }\n\n        case ADVANCE_PAGE: {\n            ++preState.page;\n            return {...state, ...preState};\n        }\n        default: return { ...state };\n    }\n}\n\nexport default reducer","import {applyMiddleware, createStore} from 'redux';\nimport reducer from '../reducers';\nimport logger from 'redux-logger';\n\nconst store = createStore(reducer,\n    applyMiddleware(logger)\n    );\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './styles/main.css'\n\nimport App from './App';\nimport { Provider } from 'react-redux'\nimport store from './store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}